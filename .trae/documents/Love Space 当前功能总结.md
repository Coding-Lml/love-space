## 当前功能总览
- **登录与会话**：用户名/密码登录，JWT 存本地；路由守卫保证未登录只能进登录页；请求自动带 Bearer token，401 自动退出并跳登录。 
- **首页仪表盘**：展示在一起计时（天/时/分/秒）、未来 30 天即将到来的纪念日（最多 5 条）、最新动态（最多 5 条），前端每 60 秒刷新一次。
- **动态广场（Moments）**：分页浏览动态；支持图片/视频媒体；点赞/取消赞；评论；仅可删除自己的动态；媒体支持预览。
- **发布动态**：文本+位置+多媒体（图片/视频）；前端做类型与体积校验；后端保存动态与媒体记录。
- **日记（Diary）**：列表视图 + 日历视图；写日记时支持心情/标题/内容/日期/可见性（仅自己/双方）；读取时只会返回“对方可见”的日记。
- **纪念日（Anniversary）**：列表/新增/编辑/删除；“在一起天数”由配置 start-date 计算，前端展示；后端禁止删除标题为“在一起”的记录；支持 upcoming（首页用）。
- **聊天（Chat）**：WebSocket 实时消息（文本/图片/语音）；图片/语音先走文件上传拿 URL，再通过 WS 发送 media 消息；支持历史分页拉取；进入聊天页会 markRead 并向对方推送已读事件；“我的”页有未读角标。
- **个人中心（Profile）**：更换头像（上传并写入用户 avatar）；修改昵称；修改密码（成功后退出登录）；展示“另一半”信息。
- **文件与媒体存储**：支持图片/视频/语音上传；可本地存储或 OSS（按当前配置）；动态媒体表支持 thumbnail 字段；前端对图片 URL 支持生成缩略参数用于列表展示。

## 关键交互流程（你决定新增功能时最常改的地方）
- **登录流程**：前端登录 → `/api/auth/login` → 保存 token/user → 拉 `/api/auth/partner` → App 建立聊天 WS。
- **发图/发语音（聊天）**：前端上传文件 `/api/files/upload` → 得到 URL → WS 发送 `{type, mediaUrl}` → 后端入库并广播给双方。
- **发动态（含媒体）**：前端 FormData `files[]` → `/api/moments` → 后端逐个上传文件拿 URL/thumbnail → 写 moment + moment_media。
- **日记可见性**：写入时保存 visibility；读取时“对方 only self 的日记”不会被返回。

## 当前功能按“模块—页面—接口”速查
- **认证/用户**：登录、获取自己信息、获取另一半、更新资料、改密、上传头像。
- **Dashboard**：获取首页聚合数据。
- **Moments**：发布、列表分页、详情、删除、点赞、评论（增/删）。
- **Diary**：写日记、列表分页、按月标记、按日期获取、详情、删除。
- **Anniversary**：列表、together、upcoming、新增、编辑、删除。
- **Chat**：WS 实时收发；HTTP 历史分页与已读。
- **Files**：单/多文件上传、按 URL 删除。

## 下一步怎么选“新增功能”（建议你按场景挑）
- **情侣体验类**：共同相册/相册分类、纪念日提醒（站内提醒/日历订阅）、每日打卡、共同待办清单。
- **聊天增强**：消息撤回、消息引用/回复、表情包、自定义主题、离线重连与失败重试。
- **内容沉淀**：日记导出/备份、动态按月份归档、搜索（按关键词/日期/地点）。
- **稳定与性能**：CDN、聊天/动态虚拟列表、WS 自动重连、静态资源 gzip+强缓存。

## 我建议的下一步（需要你确认后再开始动手）
1. 你从上面“新增功能”里选 1–2 个最想要的，我把需求拆成接口/表结构/页面改动清单。
2. 选定后，我再给出实现顺序：先后端接口与数据结构，再前端页面与交互，最后部署与验证。